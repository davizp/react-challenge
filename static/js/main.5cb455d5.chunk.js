(this["webpackJsonpreact-challenge"]=this["webpackJsonpreact-challenge"]||[]).push([[0],{64:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(15),o=n.n(a),s=(n(64),n(16)),i=n(21),d=n(47),u=n(8),m="FETCH_POSTS_REQUEST",j="FETCH_POSTS_SUCCESS",b="FETCH_POSTS_FAILURE",p="FETCH_COMMENTS_REQUEST",l="FETCH_COMMENTS_SUCCESS",O="FETCH_COMMENTS_FAILURE",h="ADD_COMMENT",f={loading:!1,error:"",posts:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case j:return Object(u.a)(Object(u.a)({},e),{},{error:"",loading:!1,posts:t.posts});case b:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,posts:[],error:t.error});default:return e}},g=n(55),x={loading:!1,error:"",comments:[]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case l:return Object(u.a)(Object(u.a)({},e),{},{error:"",loading:!1,comments:t.comments});case O:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,comments:[],error:t.error});case h:return Object(u.a)(Object(u.a)({},e),{},{comments:[Object(u.a)({},t.comment)].concat(Object(g.a)(e.comments))});default:return e}},C=Object(i.b)({posts:v,comments:y}),S=i.c,E=[d.a],T=Object(i.d)(C,{},S(i.a.apply(void 0,E))),w=n(108),k=n(106),F=n(17),I=n(110),N=n(109),M=n(113),_=n(111),R=n(112),P=n(2),L=Object(k.a)({wrapper:{marginTop:"1rem",marginBottom:"1rem",padding:"1rem",background:"#ccc",borderRadius:4},bold:{fontWeight:"bold"}});var U=function(e){var t=e.name,n=e.body,r=L();return Object(P.jsxs)("div",{className:r.wrapper,children:[Object(P.jsx)(w.a,{className:r.bold,variant:"subtitle1",component:"h4","data-testid":"name",children:t}),Object(P.jsx)(w.a,{"data-testid":"content",children:n}),Object(P.jsx)(M.a,{children:"Like"}),Object(P.jsx)(M.a,{children:"Reply"})]})};var B=Object(s.b)((function(e){return{comments:e.comments}}),{})((function(e){var t=e.comments,n=t.loading,c=t.error,a=t.comments,o=Object(r.useState)({}),s=Object(F.a)(o,2),i=s[0],d=s[1];if(Object(r.useEffect)((function(){var e=function(e){var t={};return e.reduce((function(e,t){return e[t.postId]||(e[t.postId]=[]),e[t.postId].push(t),e}),t)}(a);d(e)}),[a]),n)return Object(P.jsx)("p",{children:"Loading"});if(c)return Object(P.jsx)("p",{children:c});var u=i[e.postId]||[];return Object(P.jsx)(P.Fragment,{children:u.map((function(e){return Object(P.jsx)(U,{name:e.name,body:e.body},"comment-".concat(e.id))}))})})),H=n(114),A=n(115),D=n(20),J=n.n(D),Q=n(31),W=n(52),V=n(53),q=n(54),z=n.n(q),G=new(function(){function e(){Object(W.a)(this,e),this.httpService=z.a.create({baseURL:"".concat("https://jsonplaceholder.typicode.com")})}return Object(V.a)(e,[{key:"fetchPosts",value:function(){return this.httpService.get("/posts")}},{key:"fetchComments",value:function(){return this.httpService.get("/comments")}}]),e}()),K=function(e){return{type:O,error:e}};var X=Object(k.a)({wrapper:{marginTop:"1rem",marginBottom:"1rem",padding:"1rem",borderRadius:4},input:{width:"100%"},alignRight:{textAlign:"right"}});var Y=Object(s.b)(null,(function(e){return{addComment:function(t){e(function(e){return{type:h,comment:e}}(t))}}}))((function(e){var t=X(),n=Object(r.useState)(""),c=Object(F.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)(!1),i=Object(F.a)(s,2),d=i[0],u=i[1];return Object(P.jsxs)(N.a,{container:!0,className:t.wrapper,spacing:2,children:[Object(P.jsxs)(N.a,{item:!0,xs:12,children:[Object(P.jsx)(H.a,{className:t.input,placeholder:"Write a comment",onChange:function(e){var t=e.target.value;a&&d&&u(!1),o(t)},value:a,error:d}),d&&Object(P.jsx)(A.a,{children:"Comment must not be empty."})]}),Object(P.jsx)(N.a,{item:!0,className:t.alignRight,xs:12,children:Object(P.jsx)(M.a,{variant:"contained",color:"primary",onClick:function(){var t=Math.ceil(1e5*Math.random()),n={postId:e.postId,id:t,name:"John Doe",email:"dummy".concat(t,"@test.com"),body:a};if(!a)return u(!0);e.addComment(n),o("")},children:"Post Comment"})})]})})),Z=Object(k.a)({wrapper:{padding:"1rem",marginTop:"1rem",marginBottom:"1rem"},body:{paddingTop:"1rem",paddingBottom:"1rem"},expandMoreIcon:{paddingRight:".5rem"}});var $=function(e){var t=e.id,n=e.title,c=e.body,a=Z(),o=Object(r.useState)(!1),s=Object(F.a)(o,2),i=s[0],d=s[1],u=Object(r.useState)(!1),m=Object(F.a)(u,2),j=m[0],b=m[1];return Object(P.jsxs)(I.a,{className:a.wrapper,elevation:4,children:[Object(P.jsx)(w.a,{variant:"h6",component:"h3","data-testid":"title",children:n}),Object(P.jsx)(w.a,{className:a.body,"data-testid":"content",children:c}),Object(P.jsxs)(N.a,{container:!0,justifyContent:"space-between",children:[Object(P.jsxs)(N.a,{item:!0,children:[Object(P.jsx)(M.a,{children:"Like"}),Object(P.jsx)(M.a,{onClick:function(){b(!j)},children:"Reply"})]}),Object(P.jsx)(N.a,{item:!0,children:Object(P.jsxs)(M.a,{onClick:function(){d(!i)},children:[i?Object(P.jsx)(_.a,{className:a.expandMoreIcon}):Object(P.jsx)(R.a,{className:a.expandMoreIcon})," View Comments"]})})]}),j&&Object(P.jsx)(Y,{postId:t}),i&&Object(P.jsx)(B,{postId:t})]})};var ee=function(e){var t=e.postsState,n=t.loading,r=t.error,c=t.posts;return n?Object(P.jsx)("p",{children:"Loading"}):r?Object(P.jsx)("p",{children:r}):Object(P.jsx)(P.Fragment,{children:c.map((function(e){return Object(P.jsx)($,{id:e.id,title:e.title,body:e.body,comments:[]},"post-".concat(e.id))}))})},te=function(e){return{type:b,error:e}};var ne=Object(k.a)({wrapper:{padding:30}});var re=Object(s.b)((function(e){return{posts:e.posts,comments:e.comments}}),(function(e){return{fetchPosts:function(){e(function(){var e=Object(Q.a)(J.a.mark((function e(t){var n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:m}),e.next=4,G.fetchPosts();case 4:if(!((n=e.sent).status>=400)){e.next=8;break}return t(te("Failed to fetch the posts")),e.abrupt("return");case 8:t((r=n.data,{type:j,posts:r})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t(te(e.t0.message));case 14:case"end":return e.stop()}var r}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())},fetchComments:function(){e(function(){var e=Object(Q.a)(J.a.mark((function e(t){var n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:p}),e.next=4,G.fetchComments();case 4:if(!((n=e.sent).status>=400)){e.next=8;break}return t(K("Failed to fetch the comments")),e.abrupt("return");case 8:t((r=n.data,{type:l,comments:r})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t(K(e.t0.message));case 14:case"end":return e.stop()}var r}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=ne();return Object(r.useEffect)((function(){e.fetchPosts(),e.fetchComments()}),[]),Object(P.jsxs)("div",{className:t.wrapper,children:[Object(P.jsx)(w.a,{variant:"h3",component:"h2",children:"Posts"}),Object(P.jsx)(ee,{postsState:e.posts})]})}));var ce=function(){return Object(P.jsx)(s.a,{store:T,children:Object(P.jsx)("div",{className:"App",children:Object(P.jsx)(re,{})})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,117)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(ce,{})}),document.getElementById("root")),ae()}},[[88,1,2]]]);
//# sourceMappingURL=main.5cb455d5.chunk.js.map